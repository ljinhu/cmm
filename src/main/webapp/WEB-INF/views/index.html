<#include "/common/layout.html">
<@header>
</@header>
<@body>
<div class="content-wrapper">
  <!-- Content Header (Page header) -->
  <section class="content-header">
    <h1>
      	主面板
      <small>首页</small>
    </h1>
  </section>

  <!-- Main content -->
  <section class="content">
	
	<div class="row">
        <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="info-box">
                <#if role == 'admin'>
                <span class="info-box-icon bg-aqua"><i class="fa fa-users"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">学生数</span>
                    <span class="info-box-number">${students?size}<small></small></span>
                </div>
                <#else>
                <span class="info-box-icon bg-aqua"><i class="fa fa-bookmark-o"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">公&nbsp;&nbsp;&nbsp;&nbsp;告</span>
                    <span class="info-box-number">${noticePage.total}<small></small></span>
                </div>
            </#if>
                <!-- /.info-box-content -->
            </div>
            <!-- /.info-box -->
        </div><!-- ./col -->
        <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="info-box">
                <#if role == 'charge'>
                <span class="info-box-icon bg-yellow"><i class="fa  fa-bank"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">管理班级数</span>
                    <span class="info-box-number">${(classes?size)!0}</span>
                </div>
                </#if>
                <#if role == 'teacher'>
                <span class="info-box-icon bg-yellow"><i class="fa  fa-bank"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">所在班级数</span>
                    <span class="info-box-number">${(classes?size)!0}</span>
                </div>
                </#if>
            <#if role == 'parent'>
            <span class="info-box-icon bg-yellow"><i class="fa  fa-users"></i></span>

            <div class="info-box-content">
                <span class="info-box-text">所在班级数学生数</span>
                <span class="info-box-number">${(detail.students)!0}</span>
            </div>
            </#if>
    <#if role == 'admin'>
    <span class="info-box-icon bg-aqua"><i class="fa fa-users"></i></span>

    <div class="info-box-content">
        <span class="info-box-text">班主任数</span>
        <span class="info-box-number">${charges?size}<small></small></span>
    </div>
</#if>

                <!-- /.info-box-content -->
            </div>
            <!-- /.info-box -->
        </div>
        <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="info-box">
                <#if role == 'parent'>
                    <span class="info-box-icon bg-green"><i class="fa  fa-users"></i></span>
                    <div class="info-box-content">
                    <span class="info-box-text">所在班级教师数</span>
                    <span class="info-box-number">${(detail.teachers)!0}</span>
                    </div>
            </#if>
                <#if role == 'charge'>
                    <span class="info-box-icon bg-green"><i class="fa  fa-users"></i></span>
                    <div class="info-box-content">
                    <span class="info-box-text">管理的学生数</span>
                    <span class="info-box-number">${(students?size)!0}</span>
                    </div>
            </#if>
            <#if role == 'teacher'>
                <span class="info-box-icon bg-green"><i class="fa  fa-users"></i></span>
                <div class="info-box-content">
                <span class="info-box-text">教授课程数</span>
                <span class="info-box-number">${(sysTeacherClasses?size)!0}</span>
                </div>
            </#if>
<#if role == 'admin'>
<span class="info-box-icon bg-aqua"><i class="fa fa-users"></i></span>

<div class="info-box-content">
    <span class="info-box-text">教师数</span>
    <span class="info-box-number">${teachers?size}<small></small></span>
</div>
</#if>
        <!-- /.info-box-content -->
            </div>
    <!-- /.info-box -->
        </div>

       <!-- fix for small devices only -->
       <div class="clearfix visible-sm-block"></div>
     </div><!-- /.row -->
     
     <div class="row">
     	<div class="col-md-12">
            <div class="box box-info">
                <div class="box-header with-border">
                    <h3 class="box-title">公告信息</h3>

                    <div class="box-tools pull-right">
                        <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                        </button>
                        <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                    </div>
                </div>
                <!-- /.box-header -->
                <div class="box-body">
                    <div class="table-responsive">
                        <table class="table no-margin">
                            <thead>
                            <tr>
                                <th  width="100px">行号</th>
                                <th>公告标题</th>
                                <th>所在班级</th>
                                <th>发布人</th>
                                <th>发布时间</th>
                            </tr>
                            </thead>
                            <tbody>
                            <#list noticePage.getRecords() as record>
                            <tr>
                                <td>${((noticePage.current-1)*noticePage.size +record_index+1)!}</td>
                                <td><span class="label label-info">${record.name}</span></td>
                                <td><span class="label label-success">${record.className}</span></td>
                                <td><span class="label label-warning">${record.createdName}</span></td>
                                <td>
                                    <div class="sparkbar" data-color="#00a65a" data-height="20">${(record.createdTime?string('yyyy/MM/dd HH:mm:ss'))!'--'}</div>
                                </td>
                            </tr>
                            </#list>
                            </tbody>
                        </table>
                    </div><!-- /.box -->
     	</div>
     </div>
	
  </section><!-- /.content -->
</div><!-- /.content-wrapper -->
</@body>
<@footer>
 <script src="/plugins/chartjs/Chart.min.js"></script>
  <script>
 	$(function(){

        var areaChartOptions = {
          //Boolean - If we should show the scale at all
          showScale: true,
          //Boolean - Whether grid lines are shown across the chart
          scaleShowGridLines: false,
          //String - Colour of the grid lines
          scaleGridLineColor: "rgba(0,0,0,.05)",
          //Number - Width of the grid lines
          scaleGridLineWidth: 1,
          //Boolean - Whether to show horizontal lines (except X axis)
          scaleShowHorizontalLines: true,
          //Boolean - Whether to show vertical lines (except Y axis)
          scaleShowVerticalLines: true,
          //Boolean - Whether the line is curved between points
          bezierCurve: true,
          //Number - Tension of the bezier curve between points
          bezierCurveTension: 0.3,
          //Boolean - Whether to show a dot for each point
          pointDot: true,
          //Number - Radius of each point dot in pixels
          pointDotRadius: 4,
          //Number - Pixel width of point dot stroke
          pointDotStrokeWidth: 1,
          //Number - amount extra to add to the radius to cater for hit detection outside the drawn point
          pointHitDetectionRadius: 20,
          //Boolean - Whether to show a stroke for datasets
          datasetStroke: true,
          //Number - Pixel width of dataset stroke
          datasetStrokeWidth: 2,
          //Boolean - Whether to fill the dataset with a color
          datasetFill: true,
          //String - A legend template
          legendTemplate: "<ul class=\"<%=name.toLowerCase()%>-legend\"><% for (var i=0; i<datasets.length; i++){%><li><span style=\"background-color:<%=datasets[i].lineColor%>\"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>",
          //Boolean - whether to maintain the starting aspect ratio or not when responsive, if set to false, will take up entire container
          maintainAspectRatio: true,
          //Boolean - whether to make the chart responsive to window resizing
          responsive: true
        };
        
        var areaChartData = {
            labels: ["一月", "二月", "三月", "四月", "五月", "六月", "七月","八月","九月","十月","十一月","十二月"],
            datasets: [
              {
                label: "Digital Goods",
                fillColor: "rgba(60,141,188,0.9)",
                strokeColor: "rgba(60,141,188,0.8)",
                pointColor: "#3b8bba",
                pointStrokeColor: "rgba(60,141,188,1)",
                pointHighlightFill: "#fff",
                pointHighlightStroke: "rgba(60,141,188,1)",
                data: [30.05,35,36,42,50,61,72,76,78,80,82,83]
              }
            ]
          };
        
        //-------------
        //- LINE CHART -
        //--------------
        var lineChartCanvas = $("#lineChart").get(0).getContext("2d");
        var lineChart = new Chart(lineChartCanvas);
        var lineChartOptions = areaChartOptions;
        lineChartOptions.datasetFill = false;
        lineChart.Line(areaChartData, lineChartOptions);
        
        /**
        	ajax 异步获取数据
        **/
       /*  $.post("/vns/tj/chart/12",{},function(data){
        	if(data.meta.success){
        		 var areaChartData = {
   		            labels: data.data.label,
   		            datasets: [
   		              {
   		                label: "Digital Goods",
   		                fillColor: "rgba(60,141,188,0.9)",
   		                strokeColor: "rgba(60,141,188,0.8)",
   		                pointColor: "#3b8bba",
   		                pointStrokeColor: "rgba(60,141,188,1)",
   		                pointHighlightFill: "#fff",
   		                pointHighlightStroke: "rgba(60,141,188,1)",
   		                data: data.data.list
   		              }
   		            ]
   		          };
        		 lineChart.Line(areaChartData, lineChartOptions);
        	}
        }); */
       
 	});
 </script>
</@footer>